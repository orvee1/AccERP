import{c as I,u as V,r as a,j as e,B as j}from"./index-fe6d2e52.js";import{I as f}from"./input-e5a38bac.js";import{L as s}from"./label-1a727cef.js";import{D as L}from"./date-picker-3c1e787d.js";import{S as v,a as y,b as D,c as S,d as k}from"./select-ae6383b7.js";import{T as P}from"./textarea-e623590e.js";import{C as T,a as $,b as B,c as O,d as R}from"./card-00c50818.js";import{m as C}from"./mockAccounts-dd656361.js";import{S as z}from"./save-39dd484b.js";import"./extends-b7a1e135.js";const E=I("FileMinus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),Y=()=>{const{toast:i}=V(),[c,l]=a.useState(new Date),[o,m]=a.useState(""),[d,u]=a.useState(""),[r,x]=a.useState(""),[b,p]=a.useState(""),[h,N]=a.useState(""),[n,A]=a.useState(`DN-${String(Date.now()).slice(-6)}`),F=t=>{if(t.preventDefault(),!o||!d||!r||parseFloat(r)<=0){i({title:"Validation Error",description:"Please select Debit and Credit accounts, and enter a valid Amount.",variant:"destructive"});return}const g={id:`debitnote-${Date.now()}`,debitNoteNumber:n,date:c,debitAccount:o,creditAccount:d,amount:parseFloat(r),narration:b,reference:h};console.log("Debit Note Data:",g);const w=JSON.parse(localStorage.getItem("debitNotes")||"[]");localStorage.setItem("debitNotes",JSON.stringify([...w,g])),i({title:"Debit Note Saved",description:`Debit Note ${n} for ${parseFloat(r).toLocaleString("en-US",{style:"currency",currency:"USD"})} has been saved.`,className:"bg-green-500 text-white"}),l(new Date),m(""),u(""),x(""),p(""),N(""),A(`DN-${String(Date.now()).slice(-6)}`)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(T,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx($,{className:"bg-muted/50 dark:bg-dark-muted/50 p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(B,{className:"text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(E,{size:32,className:"mr-3 text-accent dark:text-dark-accent"})," New Debit Note"]}),e.jsx("div",{className:"text-muted-foreground dark:text-dark-muted-foreground font-mono text-sm bg-muted dark:bg-dark-muted px-2 py-1 rounded self-start sm:self-center",children:n})]})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs(O,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"noteDate",className:"font-semibold",children:["Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(L,{date:c,setDate:l,id:"noteDate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"amount",className:"font-semibold",children:["Amount ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(f,{id:"amount",type:"number",value:r,onChange:t=>x(t.target.value),placeholder:"0.00",min:"0.01",step:"0.01"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"debitAccount",className:"font-semibold",children:["Debit Account ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(v,{value:o,onValueChange:m,children:[e.jsx(y,{id:"debitAccount",children:e.jsx(D,{placeholder:"Select account to debit"})}),e.jsx(S,{children:C.map(t=>e.jsxs(k,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"creditAccount",className:"font-semibold",children:["Credit Account (Party/Vendor) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(v,{value:d,onValueChange:u,children:[e.jsx(y,{id:"creditAccount",children:e.jsx(D,{placeholder:"Select account to credit"})}),e.jsx(S,{children:C.map(t=>e.jsxs(k,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"reference",className:"font-semibold",children:"Original Bill/Reference No."}),e.jsx(f,{id:"reference",value:h,onChange:t=>N(t.target.value),placeholder:"e.g., Original Purchase Bill No."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"narration",className:"font-semibold",children:"Reason/Narration"}),e.jsx(P,{id:"narration",value:b,onChange:t=>p(t.target.value),placeholder:"e.g., Goods returned, Price correction"})]})]}),e.jsxs(R,{className:"bg-muted/30 dark:bg-dark-muted/30 rounded-b-lg p-6 flex justify-end space-x-3 border-t border-border dark:border-dark-border",children:[e.jsx(j,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(j,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary/90",children:[e.jsx(z,{size:18,className:"mr-2"})," Save Debit Note"]})]})]})]})})};export{Y as default};
