import{c as I,u as B,r,j as e,B as y}from"./index-fe6d2e52.js";import{I as k}from"./input-e5a38bac.js";import{L as a}from"./label-1a727cef.js";import{D as $}from"./date-picker-3c1e787d.js";import{S,a as C,b as D,c as R,d as m}from"./select-ae6383b7.js";import{T as E}from"./textarea-e623590e.js";import{C as L,a as P,b as V,c as z,d as J}from"./card-00c50818.js";import{m as u}from"./mockAccounts-dd656361.js";import{S as M}from"./save-39dd484b.js";import"./extends-b7a1e135.js";const O=I("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]),_=()=>{const{toast:p}=B(),[x,h]=r.useState(new Date),[d,i]=r.useState(""),[n,g]=r.useState(""),[s,v]=r.useState(""),[f,j]=r.useState(""),[b,N]=r.useState(""),[l,F]=r.useState(`RCPT-${String(Date.now()).slice(-6)}`),c=u.filter(t=>t.category==="Cash"||t.category==="Bank"),T=u.filter(t=>t.category!=="Cash"&&t.category!=="Bank");r.useEffect(()=>{const t=c.find(o=>o.category==="Cash");t?i(t.id):c.length>0&&i(c[0].id)},[]);const w=t=>{if(t.preventDefault(),!d||!n||!s||parseFloat(s)<=0){p({title:"Validation Error",description:"Please fill in all required fields: Received To, Received From, and a valid Amount.",variant:"destructive"});return}const o={id:`receipt-${Date.now()}`,receiptNumber:l,date:x,receivedTo:d,receivedFrom:n,amount:parseFloat(s),narration:f,reference:b};console.log("Receipt Data:",o);const A=JSON.parse(localStorage.getItem("receipts")||"[]");localStorage.setItem("receipts",JSON.stringify([...A,o])),p({title:"Receipt Saved",description:`Receipt ${l} for ${parseFloat(s).toLocaleString("en-US",{style:"currency",currency:"USD"})} has been saved.`,className:"bg-green-500 text-white"}),h(new Date),g(""),v(""),j(""),N(""),F(`RCPT-${String(Date.now()).slice(-6)}`)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(L,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx(P,{className:"bg-muted/50 dark:bg-dark-muted/50 p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(V,{className:"text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(O,{size:32,className:"mr-3 text-accent dark:text-dark-accent"})," New Receipt"]}),e.jsx("div",{className:"text-muted-foreground dark:text-dark-muted-foreground font-mono text-sm bg-muted dark:bg-dark-muted px-2 py-1 rounded self-start sm:self-center",children:l})]})}),e.jsxs("form",{onSubmit:w,children:[e.jsxs(z,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"receivedTo",className:"font-semibold",children:["Received To (Debit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(S,{value:d,onValueChange:i,children:[e.jsx(C,{id:"receivedTo",children:e.jsx(D,{placeholder:"Select account (Cash/Bank)"})}),e.jsxs(R,{children:[c.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.category,")"]},t.id)),T.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.category,")"]},t.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"receivedFrom",className:"font-semibold",children:["Received From (Credit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(S,{value:n,onValueChange:g,children:[e.jsx(C,{id:"receivedFrom",children:e.jsx(D,{placeholder:"Select source account"})}),e.jsx(R,{children:u.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"amount",className:"font-semibold text-lg",children:["Amount ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(k,{id:"amount",type:"number",value:s,onChange:t=>v(t.target.value),placeholder:"0.00",min:"0.01",step:"0.01",className:"text-xl font-semibold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"receiptDate",className:"font-semibold",children:["Receipt Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx($,{date:x,setDate:h,id:"receiptDate"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"reference",className:"font-semibold",children:"Reference No."}),e.jsx(k,{id:"reference",value:b,onChange:t=>N(t.target.value),placeholder:"e.g., Invoice #, Check #"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"narration",className:"font-semibold",children:"Narration"}),e.jsx(E,{id:"narration",value:f,onChange:t=>j(t.target.value),placeholder:"Describe the transaction..."})]})]}),e.jsxs(J,{className:"bg-muted/30 dark:bg-dark-muted/30 rounded-b-lg p-6 flex justify-end space-x-3 border-t border-border dark:border-dark-border",children:[e.jsx(y,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(y,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary/90",children:[e.jsx(M,{size:18,className:"mr-2"})," Save Receipt"]})]})]})]})})};export{_ as default};
