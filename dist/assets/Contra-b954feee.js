import{c as T,u as E,r as a,j as e,B as v}from"./index-fe6d2e52.js";import{I as N}from"./input-e5a38bac.js";import{L as r}from"./label-1a727cef.js";import{D as I}from"./date-picker-3c1e787d.js";import{S as y,a as k,b as C,c as S,d as D}from"./select-ae6383b7.js";import{T as B}from"./textarea-e623590e.js";import{C as R,a as V,b as $,c as L,d as O}from"./card-00c50818.js";import{m as z}from"./mockAccounts-dd656361.js";import{S as H}from"./save-39dd484b.js";import"./extends-b7a1e135.js";const J=T("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Z=()=>{const{toast:c}=E(),[i,l]=a.useState(new Date),[o,m]=a.useState(""),[n,u]=a.useState(""),[s,x]=a.useState(""),[h,p]=a.useState(""),[f,g]=a.useState(""),[d,A]=a.useState(`CONT-${String(Date.now()).slice(-6)}`),b=z.filter(t=>t.category==="Cash"||t.category==="Bank"),F=t=>{if(t.preventDefault(),!o||!n||!s||parseFloat(s)<=0){c({title:"Validation Error",description:"Please select From and To accounts, and enter a valid Amount.",variant:"destructive"});return}if(o===n){c({title:"Validation Error",description:"From Account and To Account cannot be the same.",variant:"destructive"});return}const j={id:`contra-${Date.now()}`,contraNumber:d,date:i,fromAccount:o,toAccount:n,amount:parseFloat(s),narration:h,reference:f};console.log("Contra Data:",j);const w=JSON.parse(localStorage.getItem("contraEntries")||"[]");localStorage.setItem("contraEntries",JSON.stringify([...w,j])),c({title:"Contra Entry Saved",description:`Contra entry ${d} for ${parseFloat(s).toLocaleString("en-US",{style:"currency",currency:"USD"})} has been saved.`,className:"bg-green-500 text-white"}),l(new Date),m(""),u(""),x(""),p(""),g(""),A(`CONT-${String(Date.now()).slice(-6)}`)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx(V,{className:"bg-muted/50 dark:bg-dark-muted/50 p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs($,{className:"text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(J,{size:32,className:"mr-3 text-accent dark:text-dark-accent"})," New Contra Entry"]}),e.jsx("div",{className:"text-muted-foreground dark:text-dark-muted-foreground font-mono text-sm bg-muted dark:bg-dark-muted px-2 py-1 rounded self-start sm:self-center",children:d})]})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs(L,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"contraDate",className:"font-semibold",children:["Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(I,{date:i,setDate:l,id:"contraDate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"amount",className:"font-semibold",children:["Amount ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(N,{id:"amount",type:"number",value:s,onChange:t=>x(t.target.value),placeholder:"0.00",min:"0.01",step:"0.01"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"fromAccount",className:"font-semibold",children:["From Account (Credit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:o,onValueChange:m,children:[e.jsx(k,{id:"fromAccount",children:e.jsx(C,{placeholder:"Select Cash/Bank account"})}),e.jsx(S,{children:b.map(t=>e.jsxs(D,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"toAccount",className:"font-semibold",children:["To Account (Debit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:n,onValueChange:u,children:[e.jsx(k,{id:"toAccount",children:e.jsx(C,{placeholder:"Select Cash/Bank account"})}),e.jsx(S,{children:b.map(t=>e.jsxs(D,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"reference",className:"font-semibold",children:"Reference No."}),e.jsx(N,{id:"reference",value:f,onChange:t=>g(t.target.value),placeholder:"e.g., Transfer ID, Slip #"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"narration",className:"font-semibold",children:"Narration"}),e.jsx(B,{id:"narration",value:h,onChange:t=>p(t.target.value),placeholder:"e.g., Cash deposited to bank, Cash withdrawal for office use"})]})]}),e.jsxs(O,{className:"bg-muted/30 dark:bg-dark-muted/30 rounded-b-lg p-6 flex justify-end space-x-3 border-t border-border dark:border-dark-border",children:[e.jsx(v,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(v,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary/90",children:[e.jsx(H,{size:18,className:"mr-2"})," Save Contra Entry"]})]})]})]})})};export{Z as default};
