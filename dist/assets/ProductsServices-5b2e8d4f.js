import{c as pe,r as a,R as fe,j as e,a as W,u as X,B as D,A as he,m as M}from"./index-fe6d2e52.js";import{I as A}from"./input-e5a38bac.js";import{D as Y,a as Z,b as ee,c as xe,d as be,e as ge,f as ve,g as ye,h as J,i as ke,j as je,A as Ne,k as Se,l as Ce,m as $e,n as we,o as Pe,p as Fe,q as Ae}from"./alert-dialog-e8612541.js";import{L as F}from"./label-1a727cef.js";import{_ as T}from"./extends-b7a1e135.js";import{P as te}from"./plus-circle-ee65b1db.js";import{T as re}from"./trash-2-fd25eb8f.js";import{S as Ue}from"./save-39dd484b.js";import{C as De,a as Be,b as Ie,c as Ee}from"./card-00c50818.js";import{F as ze}from"./file-down-f6f92ad8.js";import{S as Re,P as Oe,A as Te}from"./search-c0fd07d3.js";const H=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function qe(t,n,{checkForDefaultPrevented:r=!0}={}){return function(c){if(t==null||t(c),r===!1||!c.defaultPrevented)return n==null?void 0:n(c)}}function _e(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function se(...t){return n=>t.forEach(r=>_e(r,n))}function Le(...t){return a.useCallback(se(...t),t)}function Qe(t,n=[]){let r=[];function s(o,i){const u=a.createContext(i),m=r.length;r=[...r,i];function p(f){const{scope:h,children:k,...v}=f,w=(h==null?void 0:h[t][m])||u,S=a.useMemo(()=>v,Object.values(v));return a.createElement(w.Provider,{value:S},k)}function N(f,h){const k=(h==null?void 0:h[t][m])||u,v=a.useContext(k);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return p.displayName=o+"Provider",[p,N]}const c=()=>{const o=r.map(i=>a.createContext(i));return function(u){const m=(u==null?void 0:u[t])||o;return a.useMemo(()=>({[`__scope${t}`]:{...u,[t]:m}}),[u,m])}};return c.scopeName=t,[s,Ve(c,...n)]}function Ve(...t){const n=t[0];if(t.length===1)return n;const r=()=>{const s=t.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(o){const i=s.reduce((u,{useScope:m,scopeName:p})=>{const f=m(o)[`__scope${p}`];return{...u,...f}},{});return a.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return r.scopeName=n.scopeName,r}function ae(t){const n=a.useRef(t);return a.useEffect(()=>{n.current=t}),a.useMemo(()=>(...r)=>{var s;return(s=n.current)===null||s===void 0?void 0:s.call(n,...r)},[])}function He({prop:t,defaultProp:n,onChange:r=()=>{}}){const[s,c]=Ke({defaultProp:n,onChange:r}),o=t!==void 0,i=o?t:s,u=ae(r),m=a.useCallback(p=>{if(o){const f=typeof p=="function"?p(t):p;f!==t&&u(f)}else c(p)},[o,t,c,u]);return[i,m]}function Ke({defaultProp:t,onChange:n}){const r=a.useState(t),[s]=r,c=a.useRef(s),o=ae(n);return a.useEffect(()=>{c.current!==s&&(o(s),c.current=s)},[s,c,o]),r}function We(t){const n=a.useRef({value:t,previous:t});return a.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}const Me=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{};function Je(t){const[n,r]=a.useState(void 0);return Me(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const o=c[0];let i,u;if("borderBoxSize"in o){const m=o.borderBoxSize,p=Array.isArray(m)?m[0]:m;i=p.inlineSize,u=p.blockSize}else i=t.offsetWidth,u=t.offsetHeight;r({width:i,height:u})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),n}const ne=a.forwardRef((t,n)=>{const{children:r,...s}=t,c=a.Children.toArray(r),o=c.find(Xe);if(o){const i=o.props.children,u=c.map(m=>m===o?a.Children.count(i)>1?a.Children.only(null):a.isValidElement(i)?i.props.children:null:m);return a.createElement(K,T({},s,{ref:n}),a.isValidElement(i)?a.cloneElement(i,void 0,u):null)}return a.createElement(K,T({},s,{ref:n}),r)});ne.displayName="Slot";const K=a.forwardRef((t,n)=>{const{children:r,...s}=t;return a.isValidElement(r)?a.cloneElement(r,{...Ye(s,r.props),ref:n?se(n,r.ref):r.ref}):a.Children.count(r)>1?a.Children.only(null):null});K.displayName="SlotClone";const Ge=({children:t})=>a.createElement(a.Fragment,null,t);function Xe(t){return a.isValidElement(t)&&t.type===Ge}function Ye(t,n){const r={...n};for(const s in n){const c=t[s],o=n[s];/^on[A-Z]/.test(s)?c&&o?r[s]=(...u)=>{o(...u),c(...u)}:c&&(r[s]=c):s==="style"?r[s]={...c,...o}:s==="className"&&(r[s]=[c,o].filter(Boolean).join(" "))}return{...t,...r}}const Ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],oe=Ze.reduce((t,n)=>{const r=a.forwardRef((s,c)=>{const{asChild:o,...i}=s,u=o?ne:n;return a.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),a.createElement(u,T({},i,{ref:c}))});return r.displayName=`Primitive.${n}`,{...t,[n]:r}},{}),ce="Switch",[et,yt]=Qe(ce),[tt,rt]=et(ce),st=a.forwardRef((t,n)=>{const{__scopeSwitch:r,name:s,checked:c,defaultChecked:o,required:i,disabled:u,value:m="on",onCheckedChange:p,...N}=t,[f,h]=a.useState(null),k=Le(n,P=>h(P)),v=a.useRef(!1),w=f?!!f.closest("form"):!0,[S=!1,z]=He({prop:c,defaultProp:o,onChange:p});return a.createElement(tt,{scope:r,checked:S,disabled:u},a.createElement(oe.button,T({type:"button",role:"switch","aria-checked":S,"aria-required":i,"data-state":ie(S),"data-disabled":u?"":void 0,disabled:u,value:m},N,{ref:k,onClick:qe(t.onClick,P=>{z(U=>!U),w&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})})),w&&a.createElement(ot,{control:f,bubbles:!v.current,name:s,value:m,checked:S,required:i,disabled:u,style:{transform:"translateX(-100%)"}}))}),at="SwitchThumb",nt=a.forwardRef((t,n)=>{const{__scopeSwitch:r,...s}=t,c=rt(at,r);return a.createElement(oe.span,T({"data-state":ie(c.checked),"data-disabled":c.disabled?"":void 0},s,{ref:n}))}),ot=t=>{const{control:n,checked:r,bubbles:s=!0,...c}=t,o=a.useRef(null),i=We(r),u=Je(n);return a.useEffect(()=>{const m=o.current,p=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(p,"checked").set;if(i!==r&&f){const h=new Event("click",{bubbles:s});f.call(m,r),m.dispatchEvent(h)}},[i,r,s]),a.createElement("input",T({type:"checkbox","aria-hidden":!0,defaultChecked:r},c,{tabIndex:-1,ref:o,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function ie(t){return t?"checked":"unchecked"}const de=st,ct=nt,le=fe.forwardRef(({className:t,...n},r)=>e.jsx(de,{className:W("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input dark:data-[state=checked]:bg-dark-primary dark:data-[state=unchecked]:bg-dark-input",t),...n,ref:r,children:e.jsx(ct,{className:W("pointer-events-none block h-5 w-5 rounded-full bg-background dark:bg-dark-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));le.displayName=de.displayName;const it=({onSave:t,onCancel:n,initialData:r,isEditMode:s})=>{const{toast:c}=X(),[o,i]=a.useState(""),[u,m]=a.useState(""),[p,N]=a.useState(""),[f,h]=a.useState(""),[k,v]=a.useState(""),[w,S]=a.useState(""),[z,P]=a.useState(""),[U,q]=a.useState(!1),[y,I]=a.useState([{id:Date.now(),name:"pcs",factor:1,isBase:!0}]),[C,R]=a.useState(""),[d,b]=a.useState(1),[j,x]=a.useState(null);a.useEffect(()=>{var l,$,B;s&&r?(i(r.name||""),m(r.code||r.id||""),N(r.description||""),h(r.category||""),v(((l=r.costingPrice)==null?void 0:l.toString())||""),S((($=r.salesPrice)==null?void 0:$.toString())||""),P(((B=r.openingQuantity)==null?void 0:B.toString())||""),q(r.isService||!1),I(r.units&&r.units.length>0?r.units:[{id:Date.now(),name:"pcs",factor:1,isBase:!0}]),x(r.id||r.code)):g()},[r,s]);const g=()=>{i(""),m(""),N(""),h(""),v(""),S(""),P(""),q(!1),I([{id:Date.now(),name:"pcs",factor:1,isBase:!0}]),R(""),b(1),x(null)},_=()=>{if(!C.trim()||d<=0){c({title:"Invalid Unit",description:"Please provide a valid unit name and factor.",variant:"destructive"});return}if(y.find(l=>l.name.toLowerCase()===C.trim().toLowerCase())){c({title:"Duplicate Unit",description:"This unit name already exists.",variant:"destructive"});return}I([...y,{id:Date.now(),name:C.trim(),factor:parseFloat(d),isBase:y.length===0}]),R(""),b(1)},Q=l=>{if(y.length===1){c({title:"Cannot Remove",description:"At least one unit must be defined.",variant:"destructive"});return}const $=y.find(B=>B.id===l);if($&&$.isBase&&y.length>1){c({title:"Cannot Remove Base Unit",description:"Please set another unit as base before removing.",variant:"destructive"});return}I(y.filter(B=>B.id!==l))},ue=l=>{I(y.map($=>({...$,isBase:$.id===l})))},V=()=>{const l=y.find($=>$.isBase);return l?l.name:"N/A"},me=l=>{if(l.preventDefault(),!o.trim()){c({title:"Validation Error",description:"Product name is required.",variant:"destructive"});return}if(y.filter(O=>O.isBase).length!==1){c({title:"Validation Error",description:"Exactly one unit must be set as the base unit.",variant:"destructive"});return}const $=y.find(O=>O.isBase),B={id:j||`prod-${Date.now()}`,name:o,code:u||(j?j.split("-")[1]||String(Date.now()).slice(-4):`P${String(Date.now()).slice(-4)}`),description:p,category:f,costingPrice:parseFloat(k)||0,salesPrice:parseFloat(w)||0,openingQuantity:U?1/0:parseFloat(z)||0,isService:U,units:y.map(O=>({...O,factor:parseFloat(O.factor)})),baseUnitName:$.name,sl:s&&r?r.sl:void 0,location:s&&r?r.location:"Warehouse A"};t(B,s),c({title:`Product ${s?"Updated":"Added"}`,description:`${o} has been successfully ${s?"updated":"added"}.`,className:"bg-green-500 text-white dark:bg-green-600 dark:text-white"}),n()};return e.jsxs("form",{onSubmit:me,className:"space-y-6 p-1",children:[e.jsxs(Y,{className:"hidden",children:[e.jsx(Z,{children:s?"Edit Product/Service":"Add New Product/Service"}),e.jsx(ee,{children:s?"Update the details of the existing product or service.":"Fill in the details to add a new product or service to your inventory."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"productName",className:"font-semibold",children:["Product/Service Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"productName",value:o,onChange:l=>i(l.target.value),placeholder:"e.g., Premium Widget, Hourly Consulting",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"productCode",className:"font-semibold",children:"Product Code/SKU"}),e.jsx(A,{id:"productCode",value:u,onChange:l=>m(l.target.value),placeholder:"Auto-generated if blank",disabled:s}),s&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Product code cannot be changed after creation."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"description",className:"font-semibold",children:"Description"}),e.jsx(A,{id:"description",value:p,onChange:l=>N(l.target.value),placeholder:"Brief description of the product/service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"category",className:"font-semibold",children:"Category"}),e.jsx(A,{id:"category",value:f,onChange:l=>h(l.target.value),placeholder:"e.g., Electronics, Services, Materials"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"costingPrice",className:"font-semibold",children:["Costing Price (per ",e.jsx("span",{className:"text-accent dark:text-dark-accent",children:V()}),")"]}),e.jsx(A,{id:"costingPrice",type:"number",value:k,onChange:l=>v(l.target.value),placeholder:"0.00",min:"0",step:"0.01",disabled:s,className:s?"disabled:opacity-70 disabled:cursor-not-allowed":""}),s&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Costing price cannot be changed after creation."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"salesPrice",className:"font-semibold",children:["Default Sales Price (per ",e.jsx("span",{className:"text-accent dark:text-dark-accent",children:V()}),")"]}),e.jsx(A,{id:"salesPrice",type:"number",value:w,onChange:l=>S(l.target.value),placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[e.jsx(le,{id:"isService",checked:U,onCheckedChange:q}),e.jsx(F,{htmlFor:"isService",className:"font-semibold",children:"This is a service item (does not track quantity)"})]}),!U&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs(F,{htmlFor:"openingQuantity",className:"font-semibold",children:["Opening Quantity (in ",e.jsx("span",{className:"text-accent dark:text-dark-accent",children:V()}),")"]}),e.jsx(A,{id:"openingQuantity",type:"number",value:z,onChange:l=>P(l.target.value),placeholder:"0",min:"0",disabled:s,className:s?"disabled:opacity-70 disabled:cursor-not-allowed":""}),s&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opening quantity cannot be changed after creation."})]}),!U&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border dark:border-dark-border mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary dark:text-dark-primary",children:"Manage Units of Measure"}),e.jsxs("div",{className:"p-4 bg-muted/50 dark:bg-dark-muted/50 rounded-md space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{htmlFor:"newUnitName",children:"New Unit Name"}),e.jsx(A,{id:"newUnitName",value:C,onChange:l=>R(l.target.value),placeholder:"e.g., Dozen, Box"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{htmlFor:"newUnitFactor",children:"Factor (to Base Unit)"}),e.jsx(A,{id:"newUnitFactor",type:"number",value:d,onChange:l=>b(l.target.value),placeholder:"e.g., 12",min:"0.001",step:"any"})]}),e.jsxs(D,{type:"button",onClick:_,className:"sm:self-end bg-secondary hover:bg-secondary-hover dark:bg-dark-secondary dark:hover:bg-dark-secondary-hover text-secondary-foreground dark:text-dark-secondary-foreground",children:[e.jsx(te,{size:18,className:"mr-2"})," Add Unit"]})]}),e.jsx(he,{children:y.length>0&&e.jsx(M.ul,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2 pt-2",children:y.map(l=>e.jsxs(M.li,{layout:!0,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},transition:{type:"spring",stiffness:300,damping:30},className:"flex items-center justify-between p-2.5 bg-background dark:bg-dark-background rounded-md shadow-sm border border-border dark:border-dark-border",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{variant:"ghost",size:"icon",onClick:()=>ue(l.id),className:`mr-2 h-7 w-7 ${l.isBase?"text-yellow-500 dark:text-yellow-400":"text-muted-foreground dark:text-dark-muted-foreground"}`,children:e.jsx(H,{size:18,fill:l.isBase?"currentColor":"none"})}),e.jsx("span",{className:"font-medium text-foreground dark:text-dark-foreground",children:l.name}),e.jsxs("span",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground ml-2",children:["(",l.factor," to Base)"]})]}),e.jsx(D,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q(l.id),className:"text-destructive dark:text-red-400 hover:text-destructive/80 h-7 w-7",children:e.jsx(re,{size:16})})]},l.id))})}),e.jsxs("p",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground pt-1",children:["Click the star ",e.jsx(H,{size:12,className:"inline text-yellow-500"})," to set a unit as the base unit. All other unit factors are relative to this base unit."]})]})]}),e.jsxs(xe,{className:"pt-8",children:[e.jsx(be,{asChild:!0,children:e.jsx(D,{type:"button",variant:"outline",onClick:n,children:"Cancel"})}),e.jsxs(D,{type:"submit",className:"bg-primary hover:bg-primary-hover dark:bg-dark-primary dark:hover:bg-dark-primary-hover text-primary-foreground dark:text-dark-primary-foreground",children:[e.jsx(Ue,{size:18,className:"mr-2"})," ",s?"Update Product":"Save Product"]})]})]})},G=[{sl:1,id:"PROD001",name:"Standard Widget",code:"PROD001",location:"Warehouse A",costingPrice:15.5,salesPrice:25,openingQuantity:150,units:[{id:1,name:"pcs",factor:1,isBase:!0}],baseUnitName:"pcs",openingQuantityDate:"2023-01-01",isService:!1,category:"Widgets",description:"A standard quality widget."},{sl:2,id:"PROD002",name:"Premium Gadget",code:"PROD002",location:"Warehouse B",costingPrice:49.99,salesPrice:89.99,openingQuantity:75,units:[{id:1,name:"pcs",factor:1,isBase:!0},{id:2,name:"box",factor:5,isBase:!1}],baseUnitName:"pcs",openingQuantityDate:"2023-01-15",isService:!1,category:"Gadgets",description:"A premium quality gadget with extra features."},{sl:3,id:"SERV001",name:"Consulting Hour",code:"SERV001",location:"N/A",costingPrice:0,salesPrice:100,openingQuantity:1/0,units:[{id:1,name:"hour",factor:1,isBase:!0}],baseUnitName:"hour",openingQuantityDate:null,isService:!0,category:"Services",description:"One hour of expert consulting."}],L=t=>{var o;const n=((o=t.units)==null?void 0:o.find(i=>i.isBase))||{name:"N/A",factor:1},r=t.isService?1/0:t.openingQuantity||0,s=t.costingPrice||0,c=t.isService?1/0:r*s;return{...t,avgCost:s,qty:r,value:c,avgCostFormatted:s.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),qtyFormatted:t.isService?"N/A":`${r.toLocaleString("en-US")} ${n.name}`,valueFormatted:t.isService?"N/A":c.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),baseUnitName:n.name}},E=({children:t,columnKey:n,sortConfig:r,requestSort:s,isTextRight:c=!1,className:o=""})=>{const i=r&&r.key===n,u=i?r.direction:null;return e.jsx("th",{scope:"col",className:`px-4 py-3 cursor-pointer hover:bg-primary/10 dark:hover:bg-dark-primary/10 transition-colors ${c?"text-right":"text-left"} ${o}`,onClick:()=>s(n),children:e.jsxs("div",{className:`flex items-center ${c?"justify-end":"justify-start"}`,children:[!c&&t,e.jsx("span",{className:`mx-1 ${c?"mr-0 ml-1":"ml-0 mr-1"}`,children:i?u==="ascending"?"▲":"▼":e.jsx(Te,{size:14,className:"opacity-40"})}),c&&t]})})},kt=()=>{const{toast:t}=X(),[n,r]=a.useState(()=>G.map(L)),[s,c]=a.useState(""),[o,i]=a.useState({key:"sl",direction:"ascending"}),[u,m]=a.useState(!1),[p,N]=a.useState(null),[f,h]=a.useState(!1),[k,v]=a.useState(null);a.useEffect(()=>{const d=localStorage.getItem("products");d?r(JSON.parse(d).map(L)):localStorage.setItem("products",JSON.stringify(G))},[]);const w=d=>{localStorage.setItem("products",JSON.stringify(d.map(({avgCostFormatted:b,qtyFormatted:j,valueFormatted:x,...g})=>g)))},S=(d=null)=>{N(d),m(!0)},z=()=>{m(!1),N(null)},P=(d,b)=>{r(j=>{let x;if(b)x=j.map(g=>g.id===d.id?L({...g,...d}):g);else{const g=j.length>0?Math.max(...j.map(Q=>Q.sl))+1:1,_=L({...d,sl:g});x=[...j,_]}return w(x),x})},U=d=>{const b=n.find(j=>j.id===d);b&&(v(b),h(!0))},q=()=>{if(k){const d=n.filter(b=>b.id!==k.id);r(d),w(d),t({title:"Product Deleted",description:`${k.name} has been deleted.`,variant:"destructive"}),h(!1),v(null)}},y=()=>{t({title:"Import Products from Excel",description:"This feature will be available soon.",duration:3e3})},I=d=>c(d.target.value),C=d=>{let b="ascending";o&&o.key===d&&o.direction==="ascending"&&(b="descending"),i({key:d,direction:b})},R=a.useMemo(()=>{let d=[...n];if(s){const b=s.toLowerCase();d=d.filter(j=>Object.values(j).some(x=>String(x).toLowerCase().includes(b)))}return o!==null&&d.sort((b,j)=>{let x=b[o.key],g=j[o.key];return["avgCost","qty","value","sl","costingPrice","openingQuantity","salesPrice"].includes(o.key)?(x=x===1/0?o.direction==="ascending"?1/0:-1/0:parseFloat(x)||0,g=g===1/0?o.direction==="ascending"?1/0:-1/0:parseFloat(g)||0):typeof x=="string"&&(x=x.toLowerCase(),g=g.toLowerCase()),x<g?o.direction==="ascending"?-1:1:x>g?o.direction==="ascending"?1:-1:0}),d},[s,o,n]);return e.jsx("div",{className:"space-y-6 p-1",children:e.jsxs(De,{className:"shadow-lg border-border dark:border-dark-border",children:[e.jsx(Be,{className:"bg-card dark:bg-dark-card rounded-t-lg p-4 md:p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs(Ie,{className:"text-2xl md:text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(H,{size:28,className:"mr-3 text-yellow-500 dark:text-yellow-400"})," Products & Services"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(D,{variant:"outline",className:"text-primary dark:text-dark-primary border-primary dark:border-dark-primary hover:bg-primary/10 dark:hover:bg-dark-primary/10 shadow-sm",children:[e.jsx(te,{size:20,className:"mr-2"})," Add New"]})}),e.jsxs(ye,{align:"end",className:"bg-card dark:bg-dark-card shadow-lg rounded-md border border-border dark:border-dark-border",children:[e.jsx(J,{onClick:()=>S(null),className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:"Create Product/Service"}),e.jsxs(J,{onClick:y,className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:[e.jsx(ze,{size:16,className:"mr-2"})," Import from Excel"]})]})]})})]})}),e.jsxs(Ee,{className:"p-4 md:p-6",children:[e.jsx(ke,{open:u,onOpenChange:m,children:e.jsxs(je,{className:"sm:max-w-2xl bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground border-border dark:border-dark-border shadow-2xl rounded-lg",children:[e.jsxs(Y,{children:[e.jsx(Z,{className:"text-primary dark:text-dark-primary text-2xl font-semibold",children:p?"Edit Product/Service":"Add New Product/Service"}),e.jsxs(ee,{className:"text-muted-foreground dark:text-dark-muted-foreground",children:["Fill in the details below. Fields marked with ",e.jsx("span",{className:"text-destructive dark:text-red-400",children:"*"})," are required."]})]}),e.jsx(it,{onSave:P,onCancel:z,initialData:p,isEditMode:!!p})]})}),e.jsx(Ne,{open:f,onOpenChange:h,children:e.jsxs(Se,{children:[e.jsxs(Ce,{children:[e.jsx($e,{children:"Are you absolutely sure?"}),e.jsxs(we,{children:['This action cannot be undone. This will permanently delete the product/service "',k==null?void 0:k.name,'".']})]}),e.jsxs(Pe,{children:[e.jsx(Fe,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(Ae,{onClick:q,className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete product/service"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center space-x-2 p-3 bg-background dark:bg-dark-background rounded-lg shadow-sm border border-border dark:border-dark-border",children:[e.jsx(A,{type:"text",placeholder:"Search products/services (ID, Name, Base Unit...)",className:"flex-grow focus:ring-accent dark:focus:ring-dark-accent border-input dark:border-dark-input focus:border-primary dark:focus:border-dark-primary",value:s,onChange:I}),e.jsxs(D,{className:"bg-primary text-primary-foreground hover:bg-primary-hover dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary-hover",onClick:()=>t({title:"Search Updated",description:`Displaying results for "${s}"`}),children:[e.jsx(Re,{size:18,className:"mr-2"})," Search"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border dark:border-dark-border shadow-md",children:e.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left text-foreground dark:text-dark-foreground",children:[e.jsx("thead",{className:"text-xs text-primary dark:text-dark-primary uppercase bg-muted/50 dark:bg-dark-muted/50",children:e.jsxs("tr",{children:[e.jsx(E,{columnKey:"sl",sortConfig:o,requestSort:C,className:"w-16",children:"Sl"}),e.jsx(E,{columnKey:"id",sortConfig:o,requestSort:C,children:"ID"}),e.jsx(E,{columnKey:"name",sortConfig:o,requestSort:C,className:"min-w-[200px]",children:"Product Name"}),e.jsx(E,{columnKey:"baseUnitName",sortConfig:o,requestSort:C,children:"Base Unit"}),e.jsx(E,{columnKey:"avgCost",sortConfig:o,requestSort:C,isTextRight:!0,children:"Cost (Base)"}),e.jsx(E,{columnKey:"qty",sortConfig:o,requestSort:C,isTextRight:!0,children:"Quantity"}),e.jsx(E,{columnKey:"value",sortConfig:o,requestSort:C,isTextRight:!0,children:"Value"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center w-28",children:"Actions"})]})}),e.jsxs("tbody",{children:[R.map(d=>e.jsxs("tr",{className:"bg-card dark:bg-dark-card border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted/30 dark:hover:bg-dark-muted/30 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-3",children:d.sl}),e.jsx("td",{className:"px-4 py-3 text-xs font-mono",children:d.id}),e.jsx("td",{className:"px-4 py-3 font-medium text-secondary dark:text-dark-secondary",children:d.name}),e.jsx("td",{className:"px-4 py-3",children:d.baseUnitName}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.avgCostFormatted}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold hover:underline cursor-pointer text-primary dark:text-dark-primary",onClick:()=>t({title:`Product Ledger: ${d.name}`,description:"Detailed product ledger view coming soon."}),children:d.qtyFormatted}),e.jsx("td",{className:"px-4 py-3 text-right font-bold",children:d.valueFormatted}),e.jsxs("td",{className:"px-4 py-3 text-center space-x-1",children:[e.jsx(D,{variant:"ghost",size:"icon",className:"text-secondary dark:text-dark-secondary hover:text-accent dark:hover:text-dark-accent h-8 w-8",onClick:()=>S(d),children:e.jsx(Oe,{size:16})}),e.jsx(D,{variant:"ghost",size:"icon",className:"text-destructive dark:text-red-400 hover:text-destructive/80 dark:hover:text-red-300 h-8 w-8",onClick:()=>U(d.id),children:e.jsx(re,{size:16})})]})]},d.id||d.sl)),R.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:s?`No products or services found for "${s}".`:"No products or services found. Add some to get started!"})})]})]})})]})]})})};export{kt as default};
