import{c as B,u as I,r as t,j as e,B as N}from"./index-fe6d2e52.js";import{I as k}from"./input-e5a38bac.js";import{L as s}from"./label-1a727cef.js";import{D as $}from"./date-picker-3c1e787d.js";import{S,a as C,b as P,c as D,d as m}from"./select-ae6383b7.js";import{T as E}from"./textarea-e623590e.js";import{C as L,a as M,b as U,c as V,d as z}from"./card-00c50818.js";import{m as p}from"./mockAccounts-dd656361.js";import{S as R}from"./save-39dd484b.js";import"./extends-b7a1e135.js";const J=B("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),_=()=>{const{toast:u}=I(),[x,h]=t.useState(new Date),[d,l]=t.useState(""),[c,y]=t.useState(""),[r,g]=t.useState(""),[f,j]=t.useState(""),[b,v]=t.useState(""),[i,F]=t.useState(`PMT-${String(Date.now()).slice(-6)}`),n=p.filter(a=>a.category==="Cash"||a.category==="Bank"),T=p.filter(a=>a.category!=="Cash"&&a.category!=="Bank");t.useEffect(()=>{const a=n.find(o=>o.category==="Cash");a?l(a.id):n.length>0&&l(n[0].id)},[]);const A=a=>{if(a.preventDefault(),!d||!c||!r||parseFloat(r)<=0){u({title:"Validation Error",description:"Please fill in all required fields: Payment From, Payment To, and a valid Amount.",variant:"destructive"});return}const o={id:`payment-${Date.now()}`,paymentNumber:i,date:x,paymentFrom:d,paymentTo:c,amount:parseFloat(r),narration:f,reference:b};console.log("Payment Data:",o);const w=JSON.parse(localStorage.getItem("payments")||"[]");localStorage.setItem("payments",JSON.stringify([...w,o])),u({title:"Payment Saved",description:`Payment ${i} for ${parseFloat(r).toLocaleString("en-US",{style:"currency",currency:"USD"})} has been saved.`,className:"bg-green-500 text-white"}),h(new Date),y(""),g(""),j(""),v(""),F(`PMT-${String(Date.now()).slice(-6)}`)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(L,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx(M,{className:"bg-muted/50 dark:bg-dark-muted/50 p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(U,{className:"text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(J,{size:32,className:"mr-3 text-accent dark:text-dark-accent"})," New Payment"]}),e.jsx("div",{className:"text-muted-foreground dark:text-dark-muted-foreground font-mono text-sm bg-muted dark:bg-dark-muted px-2 py-1 rounded self-start sm:self-center",children:i})]})}),e.jsxs("form",{onSubmit:A,children:[e.jsxs(V,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"paymentDate",className:"font-semibold",children:["Payment Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx($,{date:x,setDate:h,id:"paymentDate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"paymentFrom",className:"font-semibold",children:["Payment From (Credit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(S,{value:d,onValueChange:l,children:[e.jsx(C,{id:"paymentFrom",children:e.jsx(P,{placeholder:"Select account (Cash/Bank)"})}),e.jsxs(D,{children:[n.map(a=>e.jsxs(m,{value:a.id,children:[a.name," (",a.category,")"]},a.id)),T.map(a=>e.jsxs(m,{value:a.id,children:[a.name," (",a.category,")"]},a.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"paymentTo",className:"font-semibold",children:["Payment To (Debit) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(S,{value:c,onValueChange:y,children:[e.jsx(C,{id:"paymentTo",children:e.jsx(P,{placeholder:"Select destination account"})}),e.jsx(D,{children:p.map(a=>e.jsxs(m,{value:a.id,children:[a.name," (",a.category,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"amount",className:"font-semibold",children:["Amount ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(k,{id:"amount",type:"number",value:r,onChange:a=>g(a.target.value),placeholder:"0.00",min:"0.01",step:"0.01"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"reference",className:"font-semibold",children:"Reference No."}),e.jsx(k,{id:"reference",value:b,onChange:a=>v(a.target.value),placeholder:"e.g., Bill #, Check #"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"narration",className:"font-semibold",children:"Narration"}),e.jsx(E,{id:"narration",value:f,onChange:a=>j(a.target.value),placeholder:"Describe the transaction..."})]})]}),e.jsxs(z,{className:"bg-muted/30 dark:bg-dark-muted/30 rounded-b-lg p-6 flex justify-end space-x-3 border-t border-border dark:border-dark-border",children:[e.jsx(N,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(N,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary/90",children:[e.jsx(R,{size:18,className:"mr-2"})," Save Payment"]})]})]})]})})};export{_ as default};
