import{c as I,u as P,r,j as e,B as j}from"./index-fe6d2e52.js";import{I as f}from"./input-e5a38bac.js";import{L as s}from"./label-1a727cef.js";import{D as L}from"./date-picker-3c1e787d.js";import{S as y,a as v,b as S,c as k,d as C}from"./select-ae6383b7.js";import{T}from"./textarea-e623590e.js";import{C as V,a as $,b as O,c as R,d as z}from"./card-00c50818.js";import{m as D}from"./mockAccounts-dd656361.js";import{S as E}from"./save-39dd484b.js";import"./extends-b7a1e135.js";const B=I("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),Y=()=>{const{toast:c}=P(),[i,l]=r.useState(new Date),[o,m]=r.useState(""),[d,u]=r.useState(""),[a,x]=r.useState(""),[p,h]=r.useState(""),[b,N]=r.useState(""),[n,A]=r.useState(`CN-${String(Date.now()).slice(-6)}`),F=t=>{if(t.preventDefault(),!d||!o||!a||parseFloat(a)<=0){c({title:"Validation Error",description:"Please select Debit and Credit accounts, and enter a valid Amount.",variant:"destructive"});return}const g={id:`creditnote-${Date.now()}`,creditNoteNumber:n,date:i,debitAccount:d,creditAccount:o,amount:parseFloat(a),narration:p,reference:b};console.log("Credit Note Data:",g);const w=JSON.parse(localStorage.getItem("creditNotes")||"[]");localStorage.setItem("creditNotes",JSON.stringify([...w,g])),c({title:"Credit Note Saved",description:`Credit Note ${n} for ${parseFloat(a).toLocaleString("en-US",{style:"currency",currency:"USD"})} has been saved.`,className:"bg-green-500 text-white"}),l(new Date),u(""),m(""),x(""),h(""),N(""),A(`CN-${String(Date.now()).slice(-6)}`)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx($,{className:"bg-muted/50 dark:bg-dark-muted/50 p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(O,{className:"text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(B,{size:32,className:"mr-3 text-accent dark:text-dark-accent"})," New Credit Note"]}),e.jsx("div",{className:"text-muted-foreground dark:text-dark-muted-foreground font-mono text-sm bg-muted dark:bg-dark-muted px-2 py-1 rounded self-start sm:self-center",children:n})]})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs(R,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"noteDate",className:"font-semibold",children:["Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(L,{date:i,setDate:l,id:"noteDate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"amount",className:"font-semibold",children:["Amount ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(f,{id:"amount",type:"number",value:a,onChange:t=>x(t.target.value),placeholder:"0.00",min:"0.01",step:"0.01"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"debitAccount",className:"font-semibold",children:["Debit Account (Party/Customer) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:d,onValueChange:u,children:[e.jsx(v,{id:"debitAccount",children:e.jsx(S,{placeholder:"Select account to debit"})}),e.jsx(k,{children:D.map(t=>e.jsxs(C,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(s,{htmlFor:"creditAccount",className:"font-semibold",children:["Credit Account ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:o,onValueChange:m,children:[e.jsx(v,{id:"creditAccount",children:e.jsx(S,{placeholder:"Select account to credit"})}),e.jsx(k,{children:D.map(t=>e.jsxs(C,{value:t.id,children:[t.name," (",t.category,")"]},t.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"reference",className:"font-semibold",children:"Original Invoice/Reference No."}),e.jsx(f,{id:"reference",value:b,onChange:t=>N(t.target.value),placeholder:"e.g., Original Sales Invoice No."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"narration",className:"font-semibold",children:"Reason/Narration"}),e.jsx(T,{id:"narration",value:p,onChange:t=>h(t.target.value),placeholder:"e.g., Goods returned by customer, Price adjustment"})]})]}),e.jsxs(z,{className:"bg-muted/30 dark:bg-dark-muted/30 rounded-b-lg p-6 flex justify-end space-x-3 border-t border-border dark:border-dark-border",children:[e.jsx(j,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(j,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary/90",children:[e.jsx(E,{size:18,className:"mr-2"})," Save Credit Note"]})]})]})]})})};export{Y as default};
